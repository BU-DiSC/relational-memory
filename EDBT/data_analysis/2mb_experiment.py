import matplotlib.pyplot as plt
import numpy as np

#BAR GRAPH:

# r_c = [78697,37030,18539,9299,4694,2387,1254,697,352,194,113,80,58]
# rh = [87095,38929,18462,9278,4643,2331,1197,618,313,191,123,60,59]
# d = [110381,59348,29083,16152,10139,3798,2835,3944,1904,1213,613,309,160]
# c = [66107,33141,16620,8236,4144,2147,1109,575,281,157,80,36,20]

# #l1 refills/references
# c = np.array([0.0012464375884, 0.0012573132957999999, 0.0012949406398, 0.0013164261914000001, 0.0012368957668000002, 0.0013071401584, 0.0012750001976, 0.0012967329712000003, 0.00076647930508, 0.00096519721584, 0.0013335802928, 0.0023976392478, 0.003511338698, 0.0030215827337999996, 0.0080779944286, 0.0078534031418, 0.010280373833000001, 0.01025641025])
# d = np.array([0.00010229358474399998, 0.00019310214028000003, 0.00025264853375999997, 0.0004962929005800001, 0.00133688935186, 0.001896942015, 0.0037534924050000003, 0.054184484596000004, 0.054724197229999993, 0.056473363072, 0.058680306904, 0.069191610672, 0.07938684953399999, 0.10007917655999998, 0.100458015266, 0.09287749288, 0.08040201005, 0.07859078591])
# r_c = np.array([3.3277431754000004e-05, 2.409965064e-05, 5.7802632976e-05, 3.661952700399999e-05, 3.0156003468e-05, 4.379436702600001e-05, 7.895995256400001e-05, 0.000120552903184, 0.00023520358196, 0.0005156207632200001, 0.0009598902982399999, 0.0017729753006, 0.0027886602336, 0.0049298988694, 0.0091353525534, 0.016920062696, 0.024079745392799997, 0.05184907546])
# rh = np.array([3.5611113389999994e-05, 2.9888945652e-05, 5.466116919e-05, 2.8362197233999997e-05, 4.5233960094e-05, 4.8819825076e-05, 9.0445284074e-05, 0.00013777308700000003, 0.00028683573164000004, 0.00064166505646, 0.00100550796284, 0.0020913948557999998, 0.0033283093040000003, 0.0059880871129999996, 0.011497370794000001, 0.02066427121, 0.030697367496, 0.05555555555])

#l2 refills/references
c = np.array([0.36995596884, 0.34916351936000006, 0.36942222432000005, 0.36696908828, 0.37803845201999997, 0.36635049504, 0.37017395533999997, 0.37383708744, 0.46904886807999996, 0.4721043377, 0.46270775492, 0.45580977842000003, 0.39826447976, 0.4707507667, 0.39683112987999997, 0.40125313281999997, 0.29853479854, 0.30753968253])
d = np.array([0.49827450988, 0.4987412397, 0.4988581418, 0.4990403709600001, 0.49889826002, 0.49818103628, 0.49656964989999997, 0.48616521162000004, 0.48148435364, 0.46629142018, 0.44852332603999995, 0.39229619418, 0.33386016152, 0.28762943046, 0.26548527088, 0.27518015052, 0.28985392702, 0.30318704283])
r_c = np.array([0.4974859587799999, 0.49628174824000004, 0.49313398356000004, 0.49229261932, 0.4947501261799999, 0.49177742726, 0.48227624591999996, 0.48067259348, 0.46718824578000007, 0.43211171866, 0.4232524967, 0.43278107156, 0.38456368194, 0.35384615381999995, 0.36696969698, 0.33474528568000006, 0.39241609458000004, 0.32229123533])
rh = np.array([0.3078942875, 0.18226077928, 0.077603743728, 0.084414476136, 0.06132039003999999, 0.050769711082, 0.042546482506, 0.06431984322999999, 0.08788528633, 0.08106267006, 0.11435643879999999, 0.087100261932, 0.12076802508199999, 0.14380938417000003, 0.14454268614000002, 0.15438961040000002, 0.18193940470999997, 0.15830848468])

x = np.array([4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768, 65536, 131072, 262144, 524288])
x_label = np.divide(np.arange(len(x)), 1)

plt.xlabel("Row Size")
plt.ylabel("Cache miss ratio(refills/references)")
plt.title("l2 refills/references")

bar_width = 0.2
index = np.arange(len(x_label))

plt.bar(index - bar_width, rh, width=bar_width, label='r h')
plt.bar(index, r_c, width=bar_width, label='r c')
plt.bar(index + bar_width, d, width=bar_width, label='d')
plt.bar(index + (2 * bar_width), c, width=bar_width, label='c')

plt.xticks(index, x)
plt.legend()
plt.show()


# NORMALIZED EXECUTION TIME:

# Time(ms)
# r_c = np.array([1464368.8, 726508.2, 366613.2, 183965.6, 90351.6, 45210.4, 22632.0, 11344.2, 5714.2, 2890.2, 1488.6, 785.0, 408.8, 214.6, 131.2, 83.6, 57.4, 47.7])
# rh = np.array([1458607.4, 727362.6, 362286.2, 180814.8, 90517.8, 45094.2, 22563.4, 11298.8, 5662.2, 2855.0, 1438.6, 736.0, 382.0, 207.6, 117.0, 76.8, 49.4, 38.3])
# d = np.array([2052452.2, 1019033.2, 512717.2, 265339.4, 139990.6, 73706.2, 39793.0, 61694.0, 31262.6, 16447.2, 9037.0, 5019.4, 2601.6, 1379.2, 689.4, 356.8, 185.2, 119.7])
# c = np.array([2231454.6, 1095255.0, 549217.4, 275720.0, 137683.0, 68167.8, 35934.0, 17590.2, 8522.6, 4318.0, 2199.6, 1169.0, 607.8, 317.2, 191.0, 111.8, 62.0, 42.0])

# #res.l1_references
# c = np.array([11010098.0, 5505071.8, 2752558.6, 1376302.0, 688174.4, 344110.0, 172078.4, 86062.4, 43054.0, 21550.0, 10798.0, 5422.0, 2734.0, 1390.0, 718.0, 382.0, 214.0, 130.0])
# d = np.array([9961523.8, 4980783.8, 2490416.2, 1245232.4, 622639.2, 311343.2, 155695.0, 77871.0, 38959.0, 19503.0, 9775.0, 4911.0, 2479.0, 1263.0, 655.0, 351.0, 199.0, 123.0])
# r_c = np.array([8912947.0, 4456496.0, 2228271.8, 1114159.4, 557103.0, 278574.6, 139311.2, 69679.0, 34863.4, 17454.6, 8751.0, 4399.4, 2223.4, 1135.8, 591.2, 319.2, 182.8, 115.7])
# rh = np.array([8912947.8, 4456496.8, 2228273.2, 1114159.0, 557103.4, 278575.4, 139310.8, 69679.8, 34863.2, 17454.8, 8751.8, 4399.0, 2223.4, 1135.6, 591.4, 319.4, 182.6, 114.0])

# #res.l2_references
# c = np.array([64995.2, 32768.4, 16493.0, 8337.4, 4079.2, 2107.0, 1044.2, 524.0, 238.4, 140.8, 81.8, 55.4, 33.2, 21.6, 25.0, 14.6, 11.6, 10.3])
# d = np.array([65924.8, 65815.0, 65769.8, 65753.8, 65771.8, 32929.4, 16529.0, 8445.8, 4268.2, 2208.4, 1152.0, 684.2, 398.4, 257.6, 137.2, 70.6, 38.4, 23.7])
# r_c = np.array([16501.0, 8268.0, 4167.4, 2093.6, 1047.0, 534.0, 279.2, 147.0, 99.4, 72.0, 53.0, 45.8, 22.0, 20.2, 19.6, 20.8, 18.0, 21.7])
# rh = np.array([16486.0, 8276.6, 4141.0, 2074.2, 1053.8, 535.6, 277.0, 144.0, 105.0, 71.2, 55.4, 47.0, 27.0, 24.4, 24.0, 27.0, 22.4, 23.0])

# #res.inst_retired
# c = np.array([18350180.6, 9175132.8, 4587609.0, 2293849.0, 1146968.0, 573527.0, 286808.2, 143447.4, 71767.0, 35927.0, 18007.0, 9047.0, 4567.0, 2327.0, 1207.0, 647.0, 367.0, 227.0])
# d = np.array([20447337.0, 10223708.0, 5111899.6, 2555995.0, 1278040.6, 639064.6, 319576.0, 159832.2, 79960.0, 40024.0, 20056.0, 10072.0, 5080.0, 2584.0, 1336.0, 712.0, 400.0, 244.0])
# r_c = np.array([15728740.6, 7864413.2, 3932251.2, 1966169.4, 983128.0, 491607.6, 245848.2, 122968.0, 61528.4, 30807.6, 15448.0, 7768.4, 3928.4, 2008.8, 1048.2, 568.2, 327.8, 208.7])
# rh = np.array([15728740.2, 7864413.4, 3932251.4, 1966168.2, 983128.8, 491608.4, 245847.8, 122968.8, 61528.2, 30807.8, 15448.8, 7768.0, 3928.4, 2008.6, 1048.4, 568.4, 327.6, 207])


# normalized_time = d / d

# x = np.array([4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768, 65536, 131072, 262144, 524288])
# x_label = np.divide(np.arange(len(x)), 1)

# plt.xlabel("Row Size")
# plt.ylabel("Normalized Retirement Time")
# plt.title("inst_retired")

# bar_width = 0.2
# index = np.arange(len(x_label))

# plt.bar(index - bar_width, rh / d, width=bar_width, label='r h')
# plt.bar(index, r_c / d, width=bar_width, label='r c')
# plt.bar(index + (1 * bar_width), c / d, width=bar_width, label='c')

# plt.xticks(index, x)
# plt.legend()
# plt.ylim(0, 1.1)  
# plt.axhline(y=1.0, color='red', linestyle='-')
# plt.text(index[-1] + bar_width + 1.1, 1.0, 'row', va='center', ha='left', color='black')

# plt.show()